{"version":3,"file":"github-contributions-canvas.esm.js","sources":["../src/themes.ts","../src/index.ts"],"sourcesContent":["export const themes = {\n  __test__: {\n    background: \"#ffffff\",\n    text: \"#ffffff\",\n    meta: \"#ffffff\",\n    grade4: \"#196127\",\n    grade3: \"#239a3b\",\n    grade2: \"#7bc96f\",\n    grade1: \"#c6e48b\",\n    grade0: \"#ebedf0\"\n  },\n  standard: {\n    background: \"#ffffff\",\n    text: \"#000000\",\n    meta: \"#666666\",\n    grade4: \"#216e39\",\n    grade3: \"#30a14e\",\n    grade2: \"#40c463\",\n    grade1: \"#9be9a8\",\n    grade0: \"#ebedf0\"\n  },\n  classic: {\n    background: \"#ffffff\",\n    text: \"#000000\",\n    meta: \"#666666\",\n    grade4: \"#196127\",\n    grade3: \"#239a3b\",\n    grade2: \"#7bc96f\",\n    grade1: \"#c6e48b\",\n    grade0: \"#ebedf0\"\n  },\n  githubDark: {\n    background: \"#101217\",\n    text: \"#ffffff\",\n    meta: \"#dddddd\",\n    grade4: \"#27d545\",\n    grade3: \"#10983d\",\n    grade2: \"#00602d\",\n    grade1: \"#003820\",\n    grade0: \"#161b22\"\n  },\n  halloween: {\n    background: \"#ffffff\",\n    text: \"#000000\",\n    meta: \"#666666\",\n    grade4: \"#03001C\",\n    grade3: \"#FE9600\",\n    grade2: \"#FFC501\",\n    grade1: \"#FFEE4A\",\n    grade0: \"#ebedf0\"\n  },\n  teal: {\n    background: \"#ffffff\",\n    text: \"#000000\",\n    meta: \"#666666\",\n    grade4: \"#458B74\",\n    grade3: \"#66CDAA\",\n    grade2: \"#76EEC6\",\n    grade1: \"#7FFFD4\",\n    grade0: \"#ebedf0\"\n  },\n  leftPad: {\n    background: \"#000000\",\n    text: \"#ffffff\",\n    meta: \"#999999\",\n    grade4: \"#F6F6F6\",\n    grade3: \"#DDDDDD\",\n    grade2: \"#A5A5A5\",\n    grade1: \"#646464\",\n    grade0: \"#2F2F2F\"\n  },\n  dracula: {\n    background: \"#181818\",\n    text: \"#f8f8f2\",\n    meta: \"#666666\",\n    grade4: \"#ff79c6\",\n    grade3: \"#bd93f9\",\n    grade2: \"#6272a4\",\n    grade1: \"#44475a\",\n    grade0: \"#282a36\"\n  },\n  blue: {\n    background: \"#181818\",\n    text: \"#C0C0C0\",\n    meta: \"#666666\",\n    grade4: \"#4F83BF\",\n    grade3: \"#416895\",\n    grade2: \"#344E6C\",\n    grade1: \"#263342\",\n    grade0: \"#222222\"\n  },\n  panda: {\n    background: \"#2B2C2F\",\n    text: \"#E6E6E6\",\n    meta: \"#676B79\",\n    grade4: \"#FF4B82\",\n    grade3: \"#19f9d8\",\n    grade2: \"#6FC1FF\",\n    grade1: \"#34353B\",\n    grade0: \"#242526\"\n  },\n  sunny: {\n    background: \"#ffffff\",\n    text: \"#000000\",\n    meta: \"#666666\",\n    grade4: \"#a98600\",\n    grade3: \"#dab600\",\n    grade2: \"#e9d700\",\n    grade1: \"#f8ed62\",\n    grade0: \"#fff9ae\"\n  },\n  pink: {\n    background: \"#ffffff\",\n    text: \"#000000\",\n    meta: \"#666666\",\n    grade4: \"#61185f\",\n    grade3: \"#a74aa8\",\n    grade2: \"#ca5bcc\",\n    grade1: \"#e48bdc\",\n    grade0: \"#ebedf0\"\n  },\n  YlGnBu: {\n    // http://colorbrewer2.org/#type=sequential&scheme=YlGnBu&n=5\n    background: \"#ffffff\",\n    text: \"#000000\",\n    meta: \"#666666\",\n    grade4: \"#253494\",\n    grade3: \"#2c7fb8\",\n    grade2: \"#41b6c4\",\n    grade1: \"#a1dab4\",\n    grade0: \"#ebedf0\"\n  },\n  solarizedDark: {\n    background: \"#002b36\",\n    text: \"#93a1a1\",\n    meta: \"#586e75\",\n    grade4: \"#d33682\",\n    grade3: \"#b58900\",\n    grade2: \"#2aa198\",\n    grade1: \"#268bd2\",\n    grade0: \"#073642\"\n  },\n  solarizedLight: {\n    background: \"#fdf6e3\",\n    text: \"#586e75\",\n    meta: \"#93a1a1\",\n    grade4: \"#6c71c4\",\n    grade3: \"#dc322f\",\n    grade2: \"#cb4b16\",\n    grade1: \"#b58900\",\n    grade0: \"#eee8d5\"\n  }\n};\n","import addWeeks from \"date-fns/addWeeks\";\nimport format from \"date-fns/format\";\nimport getMonth from \"date-fns/getMonth\";\nimport isAfter from \"date-fns/isAfter\";\nimport isBefore from \"date-fns/isBefore\";\nimport parseISO from \"date-fns/parseISO\";\nimport setDay from \"date-fns/setDay\";\nimport startOfWeek from \"date-fns/startOfWeek\";\nimport { themes } from \"./themes\";\n\ninterface DataStructYear {\n  year: string;\n  total: number;\n  range: {\n    start: string;\n    end: string;\n  };\n}\n\ninterface DataStructContribution {\n  date: string;\n  count: number;\n  color: string;\n  intensity: number;\n}\n\ninterface DataStruct {\n  years: DataStructYear[];\n  contributions: DataStructContribution[];\n}\n\ninterface GraphEntry {\n  date: string;\n  info?: DataStructContribution;\n}\n\ninterface Options {\n  themeName?: keyof typeof themes;\n  customTheme?: Theme;\n  skipHeader?: boolean;\n  skipAxisLabel?: boolean;\n  username: string;\n  data: DataStruct;\n  fontFace?: string;\n  footerText?: string;\n}\n\ninterface DrawYearOptions extends Options {\n  year: DataStructYear;\n  offsetX?: number;\n  offsetY?: number;\n}\n\ninterface DrawMetadataOptions extends Options {\n  width: number;\n  height: number;\n}\n\ninterface Theme {\n  background: string;\n  text: string;\n  meta: string;\n  grade4: string;\n  grade3: string;\n  grade2: string;\n  grade1: string;\n  grade0: string;\n}\n\nfunction getPixelRatio() {\n  if (typeof window === \"undefined\") {\n    return 1;\n  }\n  return window.devicePixelRatio || 1;\n}\n\nconst DATE_FORMAT = \"yyyy-MM-dd\";\nconst boxWidth = 10;\nconst boxMargin = 2;\nconst textHeight = 15;\nconst defaultFontFace = \"IBM Plex Mono\";\nconst headerHeight = 60;\nconst canvasMargin = 20;\nconst yearHeight = textHeight + (boxWidth + boxMargin) * 8 + canvasMargin;\nconst scaleFactor = getPixelRatio();\n\nfunction getTheme(opts: Options): Theme {\n  const { themeName, customTheme } = opts;\n  if (customTheme) {\n    return {\n      background: customTheme.background ?? themes.standard.background,\n      text: customTheme.text ?? themes.standard.text,\n      meta: customTheme.meta ?? themes.standard.meta,\n      grade4: customTheme.grade4 ?? themes.standard.grade4,\n      grade3: customTheme.grade3 ?? themes.standard.grade3,\n      grade2: customTheme.grade2 ?? themes.standard.grade2,\n      grade1: customTheme.grade1 ?? themes.standard.grade1,\n      grade0: customTheme.grade0 ?? themes.standard.grade0\n    };\n  }\n  const name = themeName ?? \"standard\";\n  return themes[name] ?? themes.standard;\n}\n\nfunction getDateInfo(data: DataStruct, date: string) {\n  return data.contributions.find(contrib => contrib.date === date);\n}\n\nfunction drawYear(ctx: CanvasRenderingContext2D, opts: DrawYearOptions) {\n  const {\n    year,\n    offsetX = 0,\n    offsetY = 0,\n    data,\n    fontFace = defaultFontFace\n  } = opts;\n  const theme = getTheme(opts);\n\n  const today = new Date();\n  const thisYear = format(today, \"yyyy\");\n  const lastDate = year.year === thisYear ? today : parseISO(year.range.end);\n  const firstRealDate = parseISO(`${year.year}-01-01`);\n  const firstDate = startOfWeek(firstRealDate);\n\n  let nextDate = firstDate;\n  const firstRowDates: GraphEntry[] = [];\n  const graphEntries: GraphEntry[][] = [];\n\n  while (isBefore(nextDate, lastDate)) {\n    const date = format(nextDate, DATE_FORMAT);\n    firstRowDates.push({\n      date,\n      info: getDateInfo(data, date)\n    });\n    nextDate = addWeeks(nextDate, 1);\n  }\n\n  graphEntries.push(firstRowDates);\n\n  for (let i = 1; i < 7; i += 1) {\n    graphEntries.push(\n      firstRowDates.map(dateObj => {\n        const date = format(setDay(parseISO(dateObj.date), i), DATE_FORMAT);\n        return {\n          date,\n          info: getDateInfo(data, date)\n        };\n      })\n    );\n  }\n  if (!opts.skipHeader) {\n    ctx.textBaseline = \"hanging\";\n    ctx.fillStyle = theme.text;\n    ctx.font = `10px '${fontFace}'`;\n    ctx.fillText(\n      `${year.year}: ${year.total} Contribution${year.total === 1 ? \"\" : \"s\"}${\n        thisYear === year.year ? \" (so far)\" : \"\"\n      }`,\n      offsetX,\n      offsetY - 17\n    );\n  }\n\n  for (let y = 0; y < graphEntries.length; y += 1) {\n    for (let x = 0; x < graphEntries[y].length; x += 1) {\n      const day = graphEntries[y][x];\n      const cellDate = parseISO(day.date);\n      if (isAfter(cellDate, lastDate) || !day.info) {\n        continue;\n      }\n      // @ts-ignore\n      const color = theme[`grade${day.info.intensity}`];\n      ctx.fillStyle = color;\n      ctx.fillRect(\n        offsetX + (boxWidth + boxMargin) * x,\n        offsetY + textHeight + (boxWidth + boxMargin) * y,\n        10,\n        10\n      );\n    }\n  }\n\n  // Draw Month Label\n  let lastCountedMonth = 0;\n  for (let y = 0; y < graphEntries[0].length; y += 1) {\n    const date = parseISO(graphEntries[0][y].date);\n    const month = getMonth(date) + 1;\n    const firstMonthIsDec = month === 12 && y === 0;\n    const monthChanged = month !== lastCountedMonth;\n    if (!opts.skipAxisLabel && monthChanged && !firstMonthIsDec) {\n      ctx.fillStyle = theme.meta;\n      ctx.fillText(\n        format(date, \"MMM\"),\n        offsetX + (boxWidth + boxMargin) * y,\n        offsetY\n      );\n      lastCountedMonth = month;\n    }\n  }\n}\n\nfunction drawMetaData(\n  ctx: CanvasRenderingContext2D,\n  opts: DrawMetadataOptions\n) {\n  const {\n    username,\n    width,\n    height,\n    footerText,\n    data,\n    fontFace = defaultFontFace\n  } = opts;\n  const theme = getTheme(opts);\n  ctx.fillStyle = theme.background;\n  ctx.fillRect(0, 0, width, height);\n\n  if (footerText) {\n    ctx.fillStyle = theme.meta;\n    ctx.textBaseline = \"bottom\";\n    ctx.font = `10px '${fontFace}'`;\n    ctx.fillText(footerText, canvasMargin, height - 5);\n  }\n\n  // chart legend\n  let themeGrades = 5;\n  ctx.fillStyle = theme.text;\n  ctx.fillText(\n    \"Less\",\n    width - canvasMargin - (boxWidth + boxMargin) * themeGrades - 55,\n    37\n  );\n  ctx.fillText(\"More\", width - canvasMargin - 25, 37);\n  for (let x = 0; x < 5; x += 1) {\n    // @ts-ignore\n    ctx.fillStyle = theme[`grade${x}`];\n    ctx.fillRect(\n      width - canvasMargin - (boxWidth + boxMargin) * themeGrades - 27,\n      textHeight + boxWidth,\n      10,\n      10\n    );\n    themeGrades -= 1;\n  }\n\n  ctx.fillStyle = theme.text;\n  ctx.textBaseline = \"hanging\";\n  ctx.font = `20px '${fontFace}'`;\n  ctx.fillText(`@${username} on GitHub`, canvasMargin, canvasMargin);\n\n  let totalContributions = 0;\n  for (const year of data.years) {\n    totalContributions += year.total;\n  }\n  ctx.font = `10px '${fontFace}'`;\n  ctx.fillText(\n    `Total Contributions: ${totalContributions}`,\n    canvasMargin,\n    canvasMargin + 30\n  );\n\n  ctx.beginPath();\n  ctx.moveTo(canvasMargin, 55 + 10);\n  ctx.lineTo(width - canvasMargin, 55 + 10);\n  ctx.strokeStyle = theme.grade0;\n  ctx.stroke();\n}\n\nexport function drawContributions(canvas: HTMLCanvasElement, opts: Options) {\n  const { data } = opts;\n  let headerOffset = 0;\n  if (!opts.skipHeader) {\n    headerOffset = headerHeight;\n  }\n  const height =\n    data.years.length * yearHeight + canvasMargin + headerOffset + 10;\n  const width = 53 * (boxWidth + boxMargin) + canvasMargin * 2;\n\n  canvas.width = width * scaleFactor;\n  canvas.height = height * scaleFactor;\n\n  const ctx = canvas.getContext(\"2d\");\n\n  if (!ctx) {\n    throw new Error(\"Could not get 2d context from Canvas\");\n  }\n\n  ctx.scale(scaleFactor, scaleFactor);\n  ctx.textBaseline = \"hanging\";\n  if (!opts.skipHeader) {\n    drawMetaData(ctx, {\n      ...opts,\n      width,\n      height,\n      data\n    });\n  }\n\n  data.years.forEach((year, i) => {\n    const offsetY = yearHeight * i + canvasMargin + headerOffset + 10;\n    const offsetX = canvasMargin;\n    drawYear(ctx, {\n      ...opts,\n      year,\n      offsetX,\n      offsetY,\n      data\n    });\n  });\n}\n\nexport { themes } from \"./themes\";\n"],"names":["themes","__test__","background","text","meta","grade4","grade3","grade2","grade1","grade0","standard","classic","githubDark","halloween","teal","leftPad","dracula","blue","panda","sunny","pink","YlGnBu","solarizedDark","solarizedLight","getPixelRatio","window","devicePixelRatio","DATE_FORMAT","boxWidth","boxMargin","textHeight","defaultFontFace","headerHeight","canvasMargin","yearHeight","scaleFactor","getTheme","opts","themeName","customTheme","name","getDateInfo","data","date","contributions","find","contrib","drawYear","ctx","year","offsetX","offsetY","fontFace","theme","today","Date","thisYear","format","lastDate","parseISO","range","end","firstRealDate","firstDate","startOfWeek","nextDate","firstRowDates","graphEntries","isBefore","push","info","addWeeks","i","map","dateObj","setDay","skipHeader","textBaseline","fillStyle","font","fillText","total","y","length","x","day","cellDate","isAfter","color","intensity","fillRect","lastCountedMonth","month","getMonth","firstMonthIsDec","monthChanged","skipAxisLabel","drawMetaData","username","width","height","footerText","themeGrades","totalContributions","years","beginPath","moveTo","lineTo","strokeStyle","stroke","drawContributions","canvas","headerOffset","getContext","Error","scale","forEach"],"mappings":"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"}